# 一、从渲染开始

- [一、从渲染开始](#一从渲染开始)
  - [1.1 如何渲染](#11-如何渲染)
  - [1.2 标志（flag）](#12-标志flag)

## 1.1 如何渲染
以下是一段简单的manimce代码。
```Python
from manim import *  # 导入manim库

class HelloWorld(Scene):  # 新建名为HelloWorld的视频（类）
    def construct(self):
        circle = Circle(radius=1)  # 新建一个半径为1的圆
        text = Text("Hello world.你好世界。")  # 新建一段文本

        self.play(Create(circle))  # 播放圆的创造动画
        self.play(Write(text))  # 播放文本的书写动画
        self.wait(1)  # 等待1秒
```
新建Python文件，输入代码，点击运行！除了vscode弹出终端窗口以外，无事发生。这是因为manim不是<u>靠直接运行代码</u>来渲染的，而是靠**在终端输入命令**来渲染的。

渲染命令的格式为`manim 文件名.py 类名 标志`。

如果这个Python文件的名字叫“你好世界”，且想要渲染完后预览(preview)视频来看看效果，那就在终端输入：
```manim 你好世界.py HelloWorld -p```
其中，`-p`表示弹出预览视频。若文件名内有空格，则可用双引号将文件名括住。在终端输入命令时，请确保终端位于Python文件所在文件夹内。

![](images/1.1.gif)

显然，这样的渲染方式有点麻烦。能不能省去在终端输入命令的步骤，直接点击运行就能渲染呢？这很简单，只需要实现：点击运行，代码自动在终端运行命令。
```Python
from manim import *
import os

if __name__ == '__main__':  # 只在你手动点击的那一次运行，执行以下代码
    os.system(' '.join((    # 让终端执行命令
        'manim',
        '你好世界.py',  # 文件名
        'HelloWorld',  # 类名，即视频名字
        '-p',          # 标志
    )))
```
当然，你也可以使用vscode的插件Manim Sideview，或者是以下代码：
```Python
if __name__ == "__main__":
    HelloWorld().render(preview=True)  # 参数默认为False
```
个人感觉这两种方法（插件，直接render）麻烦的点在于不能方便地设置flag。


## 1.2 标志（flag）
除了刚刚介绍的`-p`，manimce还提供了其他功能的标志。

比较常用的标志有**视频质量**（quality）。
| 标志  | 含义           | 分辨率@帧率  |
| ----- | -------------- | ------------ |
| `-ql` | 低质量         | 854x480@15   |
| `-qm` | 中等质量       | 1280x720@30  |
| `-qh` | 高质量（默认） | 1920x1080@60 |
| `-qp` | 2K             | 2560x1440@60 |
| `-qk` | 4K             | 3840x2160@60 |

以下是其他常用的标志。
| 标志              | 含义（作用）                                              |
| ----------------- | --------------------------------------------------------- |
| `-a`              | 渲染文件内所有类                                          |
| `-c file`         | 打开配置文件                                              |
| `--fps FLOAT`     | 自定义帧速率                                              |
| `-n 0,5`          | 渲染第0个到第5个动画（从0开始计数，闭区间，逗号后无空格） |
| `-p`              | 渲染完后弹出视频（或图片）                                |
| `-r W,H`          | 自定义宽高                                                |
| `-s`              | 渲染最后一帧                                              |
| `-t`              | 生成透明背景的视频(.mov)或图片(.png)                      |
| `--format=gif`    | 更改输出格式（此处示例是生成动图）                        |
| `--save_sections` | 分组保存                                                  |

可以使用`self.next_section()`来为动画分组，分好组后便可使用`--save_sections`来分组保存。
```Python
class Example(Scene):
    def construct(self):

        self.next_section()
        ...

        self.next_section()
        ...
```
`self.next_section()`可传入参数`name: str`来为分组命名；也可传入参数`skip_animations: bool`来决定是否要跳过渲染这一组代码。

更多关于标志内容请参考[官方文档](https://docs.manim.community/en/v0.19.2/guides/configuration.html#a-list-of-all-cli-flags)。
